<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin登录</title>
    <link rel="stylesheet" href="/static/common/bootstrap/css/bootstrap.min.css">
    <script src="/static/common/jquery.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='common/sweetalert2/sweetalert2.min.css') }}">
    <script type="text/javascript" src="{{ url_for('static', filename='common/sweetalert2/sweetalert2.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='common/sweetalert2/promise.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='common/sweetalert2/xtalert.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='common/xtajax.js') }}"></script>
</head>
<body>

<div style="background: url(/static/common/images/bg.jpg) 100% 100%; position: absolute; top: 0; bottom: 0; left: 0; right: 0;"></div>

<div class="container-fluid ">
    <div class="row d-flex justify-content-center">
        <div class="col-md-6 col-lg-4">
            <div class="list-goup" style="margin-top: 20%; border-radius: 5px;">
                <div class="list-group-item text-info d-flex justify-content-between align-items-center">
                    <h3 style="margin: 0">LOGIN</h3>
                    <div>
{#                        <svg viewBox="0 0 1870 1024" xmlns="http://www.w3.org/2000/svg" width="60" height="60"><path d="M807.294308 496.669005c-12.430537-11.601834-24.861074-24.861074-36.462908-38.120313l-436.44996 0-37.29161 38.120313L155.450769 496.669005c37.29161-38.120313 71.268411-74.514162 101.032641-110.148368C221.746965 336.867548 190.256272 284.659293 160.492042 230.03399l113.463178 0C287.974103 255.654707 302.890747 280.515781 318.636094 305.376855 341.01106 273.057459 360.899919 241.635824 379.131373 207.659023c2.486107-4.972215 1.657405-9.944429-0.828702-14.916644C374.987861 187.770165 370.015646 185.284057 365.043431 185.284057L155.450769 183.626652 155.450769 138.117076l303.995684 0c15.745347 0 29.833288 7.458322 38.051254 20.717561 9.944429 13.259239 11.601834 28.935527 5.800917 43.852172-30.592932 70.439709-74.514162 142.467764-129.208524 209.592663l357.792285 0C664.826544 326.923118 605.229026 224.233073 550.534664 114.015646l122.578905 0C684.784462 138.117076 696.317238 161.251686 709.576477 183.626652l21.546264-50.55085 110.97707 0c-21.546264 53.86566-43.092528 106.004856-68.713245 154.069598 8.287025 12.430537 15.745347 24.861074 24.861074 36.462908 9.944429-20.717561 19.060156-42.263825 28.175883-63.810089l110.97707 0c-20.717561 53.86566-43.92123 106.004856-69.541948 154.898301 22.374966 28.175883 45.578635 55.523064 70.439709 82.041543L807.294308 496.738063zM157.108174 847.072026l132.523334 0-37.29161-99.375236 125.065012 0 38.120313 99.375236 264.217966 0 36.462908-99.375236 125.893715 0-36.393849 99.375236 131.694632 0 0 47.23604L157.108174 894.308066 157.108174 847.072026zM217.603453 568.766118c0-30.661991 24.861074-55.523064 54.694362-55.523064l549.913137 0c29.833288 0 53.86566 24.861074 53.86566 55.523064l0 101.032641c0 31.490693-24.032371 55.523064-53.86566 55.523064L272.297815 725.321824c-29.833288 0-54.694362-24.032371-54.694362-55.523064L217.603453 568.766118zM751.0116 591.969787c0-16.574049-14.087942-31.490693-31.490693-31.490693L374.987861 560.479094c-17.402752 0-31.490693 14.916644-31.490693 31.490693l0 54.694362c0 17.402752 14.087942 31.490693 31.490693 31.490693l344.533046 0c17.402752 0 31.490693-14.087942 31.490693-31.490693L751.0116 591.969787z" p-id="8079" fill="#17a2b8"></path><path d="M1055.421635 277.200971l545.009981 0L1600.431616 210.145131c0-17.402752-14.087942-31.490693-31.490693-31.490693l-543.352576 0L1025.588346 131.418398l645.21392 0c29.833288 0 55.523064 25.689776 55.523064 55.523064l0 236.870785 40.60642 0 0 47.23604-329.616401 0 0 370.222822c0 30.661991-24.861074 55.523064-54.694362 55.523064l-156.555705 0 0-47.23604 53.86566 0c17.402752 0 31.490693-14.087942 31.490693-31.490693L1311.421635 471.048287l-327.130294 0L984.291341 423.812247l616.209334 0L1600.500674 324.437011l-545.009981 0L1055.490693 277.200971zM1196.231994 687.201511c-16.574049 77.828972-35.634206 148.199622-67.05584 211.181009l-127.55112 0c29.833288-66.227138 54.694362-135.838144 68.782304-211.181009L1196.231994 687.201511zM1070.338279 648.321554l-47.23604-137.495549 125.893715 0 47.23604 137.495549L1070.338279 648.321554zM1539.107634 648.321554l47.23604-137.495549 125.893715 0L1665.001349 648.321554 1539.107634 648.321554zM1665.001349 687.201511c14.916644 75.342865 38.879957 144.953871 68.713245 211.181009l-127.55112 0c-31.490693-62.912328-50.55085-133.352037-67.124899-211.181009L1665.001349 687.201511z" p-id="8080" fill="#17a2b8"></path></svg>#}
{#                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="60" height="60"><path d="M300.379595 714.047273c0 32.765399-16.400762 49.166161-49.166161 49.166161L83.412686 763.213434c-31.862273 0-47.79341-16.400762-47.79341-49.166161L35.619276 274.622451c0-33.018274 15.931137-49.527411 47.79341-49.527411l167.800748 0c32.765399 0 49.166161 16.545262 49.166161 49.527411l0 125.859592L220.254286 400.482043 220.254286 294.202215 116.06971 294.202215l0 399.940168 104.184576 0 0-113.179708 80.125309 0L300.379595 714.047273z" p-id="2514" fill="#17a2b8"></path><path d="M688.94038 763.213434 611.596698 763.213434l0-265.482819c0-14.01651 1.589501-33.451775 4.804629-58.450293l-69.432301 274.730826-40.929655 0-69.793551-274.730826c3.179002 25.432019 4.804629 44.939533 4.804629 58.450293l0 265.482819-77.379807 0L363.670641 225.058915l76.007056 0 84.568687 297.453468c0.903126 3.215127 1.589501 11.343258 2.059127 24.384393 0-5.671629 0.686376-13.835885 2.059127-24.384393l84.604812-297.453468 76.007056 0L688.976505 763.213434z" p-id="2515" fill="#17a2b8"></path><path d="M1011.139491 714.047273c0 32.765399-16.292387 49.166161-48.841036 49.166161l-161.948494 0c-32.331899 0-48.479786-16.400762-48.479786-49.166161l0-128.279969 80.450434 0 0 109.711705 98.368447 0L930.689057 589.921682l-161.262118-152.664362c-11.668384-11.271008-17.520638-25.576519-17.520638-42.988781L751.906301 274.622451c0-33.018274 16.147887-49.527411 48.479786-49.527411l161.948494 0c32.548649 0 48.841036 16.292387 48.841036 48.841036l0 120.368588-80.486559 0L930.689057 292.793339 832.32061 292.793339l0 97.320821 161.262118 151.977986c11.704509 11.018133 17.556763 25.576519 17.556763 43.675157L1011.139491 714.047273z" p-id="2516" fill="#17a2b8"></path></svg>#}
                        <svg viewBox="0 0 1122 1024" xmlns="http://www.w3.org/2000/svg" width="50" height="50"><path d="M1081.663368 571.919244a95.842577 95.842577 0 0 1 32.230784-71.684664 26.03956 26.03956 0 0 0 5.341449-32.473577l-44.249043-76.297733a25.614672 25.614672 0 0 0-29.92425-11.59337 99.302379 99.302379 0 0 1-30.349138 4.673767 97.784922 97.784922 0 0 1-95.903275-76.297733 25.675371 25.675371 0 0 0-25.068388-20.333922H806.153895a25.675371 25.675371 0 0 0-25.068387 20.333922 97.784922 97.784922 0 0 1-95.903276 76.297733 99.302379 99.302379 0 0 1-30.349138-4.673767 25.553974 25.553974 0 0 0-29.56006 11.59337L580.902595 467.457511a26.100258 26.100258 0 0 0 5.341448 32.534276 95.781879 95.781879 0 0 1 0 143.369327 26.03956 26.03956 0 0 0-5.341448 32.473577l44.370439 76.540526a25.553974 25.553974 0 0 0 29.92425 11.59337 99.302379 99.302379 0 0 1 30.349138-4.673767 97.784922 97.784922 0 0 1 95.903275 76.297733 25.675371 25.675371 0 0 0 24.704198 20.333922h87.769707a25.675371 25.675371 0 0 0 25.068388-20.333922 97.784922 97.784922 0 0 1 95.903275-76.297733 99.302379 99.302379 0 0 1 30.349138 4.673767 25.614672 25.614672 0 0 0 29.92425-11.59337l44.249043-76.237034a26.100258 26.100258 0 0 0-5.341449-32.534276 95.781879 95.781879 0 0 1-32.412879-71.684663z m-17.723896 86.434344l-30.713328 52.200517a132.079448 132.079448 0 0 0-78.907758 6.616112 128.983836 128.983836 0 0 0-41.032034 26.889336 126.00962 126.00962 0 0 0-32.412879 52.44331H819.507516a126.00962 126.00962 0 0 0-32.412879-52.382612 128.923137 128.923137 0 0 0-41.032034-26.950034 132.018749 132.018749 0 0 0-78.907759-6.616112l-30.713327-52.139819a126.980792 126.980792 0 0 0 16.631327-21.669284A124.552861 124.552861 0 0 0 636.198724 485.666994l30.713327-52.200517a132.079448 132.079448 0 0 0 78.907758-6.616112 128.983836 128.983836 0 0 0 41.032035-26.889336 126.00962 126.00962 0 0 0 32.655672-52.564707h61.305258a126.00962 126.00962 0 0 0 32.412879 52.382612 128.741042 128.741042 0 0 0 41.032035 26.950034 132.079448 132.079448 0 0 0 78.907758 6.616112l30.713327 52.321914a127.466379 127.466379 0 0 0-16.631327 21.669284 124.552861 124.552861 0 0 0 16.631327 151.01731z" p-id="5561" fill="#17a2b8"></path><path d="M849.856654 464.361899a113.627172 113.627172 0 1 0 113.566473 113.566474A113.627172 113.627172 0 0 0 849.856654 464.361899z m47.769543 160.911129a67.314388 67.314388 0 1 1 19.726939-47.587448 66.768103 66.768103 0 0 1-19.726939 47.587448z" p-id="5562" fill="#17a2b8"></path><path d="M66.424011 66.424005V757.595269h466.709041c27.253526 0 45.463008 6.069828 45.463008 33.141258s-12.139655 33.141258-39.332482 33.141258H45.543804A42.913681 42.913681 0 0 1 0.080796 778.536174V45.543798A42.913681 42.913681 0 0 1 45.543804 0.080789h993.630771c27.253526 0 39.332483 18.209483 39.332483 45.463009v233.324171c0 27.253526-6.069828 45.463008-33.141259 45.463009s-33.141258-27.253526-33.141258-45.463009v-212.443964zM339.323458 1024c-27.253526 0-45.463008-12.139655-45.463008-39.393181s18.209483-39.393181 45.463008-39.393181h408.984981c27.253526 0 45.463008 12.139655 45.463008 39.393181s-18.209483 39.393181-45.463008 39.393181z" p-id="5563" fill="#17a2b8"></path><path d="M180.961657 362.874382l-30.349138-38.786198 172.018913-108.225025 141.973267 91.836491 146.647033-94.871405-0.849775 53.839371L464.665397 363.056477 322.752829 271.159288 180.961657 362.874382zM180.961657 600.811623l-30.349138-38.846897 172.018913-108.225025 141.973267 91.897189 2.063741 1.213966-1.274664 54.567749-142.640947-92.322077L180.961657 600.811623z" p-id="5564" fill="#17a2b8"></path></svg>
                    </div>
                </div>
                <div class="list-group-item">

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">账户名:</span>
                        </div>
                        <input type="text" class="form-control" id="login_account" placeholder="请输入账户名" aria-label="">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">密 码：</span>
                        </div>
                        <input type="password" class="form-control" placeholder="密码" id="password" aria-label="">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">验证码:</span>
                        </div>
                        <input type="text" class="form-control" id="graph_captcha" placeholder="验证码" aria-label="" aria-describedby="">
                        <div class="input-group-append">
                            <span class="input-group-text p-0">
                                <img class="input-group-text p-0" id="imgCapBtn" style="width: 100%; height: 100%; display: block; border: none; cursor: pointer;" src="{{ img_cap }}" alt="">
                            </span>
                        </div>
                    </div>

                    <div class="form-group mt-4">
                        <button class="btn btn-success btn-block btn-lg" id="loginBtn">登 录</button>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script>

    // 页面刷新
    function reloadpage(redi_url,seconds) {
        if(redi_url=='' || typeof(redi_url)=='undefined' || redi_url=='undefined'){var redi_url = window.location.href}
        if(seconds=='' || typeof(seconds)=='undefined' || seconds=='undefined'){var seconds = 500}
        setTimeout(function (){window.location.href = redi_url;},seconds)
    }

    $(function () {
        $("#imgCapBtn").on('click', function () {
            xtajax.get({
                'url':'{{ url_for('common.img_cap') }}',
                'success': function (data) {
                    $('#imgCapBtn').attr('src', data);
                }
            })
        })
    
        $("#loginBtn").on('click', function () {
            let login_account = $.trim($("#login_account").val())
            let password = $.trim($("#password").val())
            let graph_captcha = $.trim($("#graph_captcha").val())
            if (!login_account){return xtalert.alertError('请输入登录账户！')}
            if (!password){return  xtalert.alertError('请输入登录密码！')}
            if (!graph_captcha){return xtalert.alertError('请输入验证码！')}
            Swal({
                title: false,
                text: '数据提交中...',
                showCloseButton: false,
                showCancelButton: false,
                showconfirmButton: false,
                allowOutsideClick: false,
                onBeforeOpen: () => {
                    Swal.showLoading()
                }
            });
            xtajax.post({
                data: {'action': 'pwdLogin', 'login_account': login_account, 'password': password, 'graph_captcha': graph_captcha},
                success: function (data) {
                    if (data.code === 200){
                        xtalert.alertSuccessToast('登录成功！');
                        reloadpage();
                    }else {
                        xtalert.alertErrorToast(data.message)
                    }
                }
            })

        })
    })

</script>

</body>
</html>